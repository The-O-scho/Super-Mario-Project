\documentclass[11pt]{article}
\usepackage[margin=1in]{geometry}
\usepackage{setspace}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{enumitem}
\usepackage{graphicx}
\usepackage{url}
\setstretch{1.1}
\pagenumbering{gobble}

\begin{document}

\noindent \textbf{STAT 333 Final Project}  \\
\textbf{Student:} Duc Huy Nguyen (Thomas), Theo Schouten \\
\textbf{Date:} \today \\
\textbf{Subject:} Deliverable 2, Descriptive Statistical Analysis

\vspace{1em}

\noindent \textbf{Overview:} \\
This paper summarizes our preliminary findings of the dataset in order to serve two perposes:
\begin{itemize}
    \item Predicting whether a given Super Mario run will be the new world record (WR)
    \item Predicting when top speed runners will be able to reach the theoretical tool-assisted speedrun time.
\end{itemize}


\vspace{0.8em}

\noindent \textbf{Descriptive Statistics and Key Findings} \\
The datasets consists of two datasets:
\begin{itemize}
    \item The first dataset records the World Record (WR) progression from the first WR ever recorded in June 25th, 2002 to the latest WR, which occurred October 22nd, 2025. It can be retrieved here: \url {https://www.speedrun.com/smb1/stats?h=Any-NTSC&x=w20p0zkn-onvvdymn.013zwgxq}
    \begin{itemize}
        \item The first dataset contains the progression of the Super Mario Bros. Any\% (NTSC) World Record (WR), beginning with the earliest recorded WR on June 25, 2002 and continuing through the most recent WR on October 22, 2025. It can be accessed here: \url{https://www.speedrun.com/smb1/stats?h=Any-NTSC&x=w20p0zkn-onvvdymn.013zwgxq}
        \item The WR has been broken \textbf{46} times by \textbf{14} different players.
        \item The first recorded WR is \textbf{325 seconds} (5 minutes 25 seconds), set on June 25, 2002 by Aaron Collins. The current WR is \textbf{294.448 seconds} (4 minutes 54.448 seconds), set on October 22, 2025 by Niftski.
        \item The theoretical human-limit time, i.e., the fastest time a human could possibly achieve, is \textbf{294.032 seconds} (4 minutes 54.032 seconds).
        \item The current WR is \textbf{0.186 seconds} slower than the TAS (Tool-Assisted Speedrun) time, which corresponds to approximately \textbf{11 frames} at 60 frames per second.
        \item The median rate of WR improvement is \textbf{-0.00184 seconds per day}, while the most recent improvement rate is \textbf{-0.00243 seconds per day}.
        \item The WR improvement rate reflects a standard pattern of diminishing returns: as players approach the theoretical TAS limit, achieving further WR improvements becomes increasingly difficult. In other words, the remaining room for improvement steadily decreases.
    \end{itemize}
    \item The second dataset contains 1,353 attempts by the current WR holder, Niftski. Each attempt is split into eight major checkpoints, where 1 marks a successful completion and 0 marks a failure. Refer to Table 1 in the Appendix for an overview of the data.
    \begin{itemize}
        \item The table below shows Niftski's success rate at each major checkpoint. \\ \\
        \begin{tabular}{|c|c|c|c|c|c|c|c|c|}
            \hline
            {Checkpoint} & {1-1} & {1-2} & {4-1} & {4-2} & {8-1} & {8-2} & {8-3} & {8-4} \\ \hline
            {Success} & {829} & {595} & {482} & {63} & {30} & {11} & {9} & {1} \\ \hline
            {$\mathbb{P}$(Success)} & {61.27\%} & {43.98\%} & {35.62\%} & {4.66\%} & {2.22\%} & {0.81\%} & {0.67\%} & {0.07\%} \\ \hline 
        \end{tabular} \\
        \item There are sharp decrease in the number of successful attempts at later checkpoints. For example, success falls from \textbf{482} at 4-1 to \textbf{63} at 4-2, an \textbf{87\%} decrease. There is also a \textbf{63\%} decrease between 8-1 and 8-2. A few factors can explain these drops:
        \begin{itemize}
            \item More pressure and stress in later stages, which can lead to mistakes.
            \item Higher difficulty in later stages, which increases the chance of errors.
            \item Success on a later level depends on success on earlier levels.
        \end{itemize}
    \end{itemize}

\end{itemize}

\vspace{0.8em}

\noindent \textbf{Suggestion of Statistical Model} \\
We suggest several models that fit the goal of the project and the data:
\begin{itemize}[leftmargin=1.2em]
    \item An ARIMA model that uses WR improvement over time (seconds per day) to predict when the WR will reach the TAS time.
    \item Bayesian model to handle the high levels of uncertainty that comes with small probabilities.
    \item Firth's bias reduction model using \textsf[logistf} to help with the smaller sample size due to the small chance of a world record happening.
    \item Other models as recommended and as necessary...
\end{itemize}


\vspace{0.8em}

\noindent \textbf{Limitations:}
\begin{itemize}[leftmargin=1.2em]
    \item Research on games like \emph{Super Mario Bros.} is limited, especially in academic settings. Because of this, data on the game and its time-attack attempts is limited.
    \item We do not have data from other competitive speedrunners and chose not to collect or publish any of their runs.
    \item We plan to address these limits by collecting data manually based on recorded results. These results are timed with reliable stopwatches to keep the measurements consistent.
\end{itemize}

\vspace{0.8em}

\noindent \textbf{Appendix:}
\begin{itemize}[leftmargin=1.2em]
    \item \textbf{R code:}
\begin{verbatim}
# Setup
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE,
                      fig.width = 6, fig.height = 4)

library(tidyverse)
library(readxl)
library(MASS)
library(car)
library(broom)
library(GGally)
library(glmmTMB)
library(logistf)
library(pROC)
library(ResourceSelection)

# Load Niftski data
data <- read.csv("Nifski Ordered.csv")

# Inspect data
glimpse(data)

# Composite features
data <- data %>%
  mutate(
    W1_total = W1_1 + W1_2,
    W4_total = W4_1 + W4_2,
    W8_prior = W8_1 + W8_2 + W8_3,
    success_rate = (W1_1 + W1_2 + W4_1 + W4_2 + W8_1 + W8_2 + W8_3)/7
  )

# Poisson model
pois_model <- glm(W8_4 ~ W1_1 + W1_2 + W4_1 + W4_2 + W8_1 + W8_2 + W8_3,
                  data = data, family = poisson)
summary(pois_model)

# Logistic regression
logit_model <- glm(W8_4 ~ W1_1 + W1_2 + W4_1 + W4_2 + W8_1 + W8_2 + W8_3,
                   data = data, family = binomial(link = "logit"))
summary(logit_model)

# Negative binomial
nb_model <- glm.nb(W8_4 ~ W1_1 + W1_2 + W4_1 + W4_2 + W8_1 + W8_2 + W8_3,
                   data = data)
summary(nb_model)

# Simulate overall WR probability
set.seed(123)
n_sims <- 100000
p_draws <- sapply(seq_len(nrow(stage_stats)), function(i) rbeta(n_sims,
                                                                stage_stats$alpha_post[i],
                                                                stage_stats$beta_post[i]))
wr_draws <- apply(p_draws,1,prod)
wr_summary <- tibble(mean=mean(wr_draws), median=median(wr_draws),
                     lower95=quantile(wr_draws,0.025),
                     upper95=quantile(wr_draws,0.975))
print(wr_summary)

# WR distribution plots
ggplot(tibble(wr_prob=wr_draws), aes(x=wr_prob)) +
  geom_histogram(bins=50) +
  labs(title="WR Probability Distribution", x="P(WR per attempt)", y="Frequency") +
  theme_bw()

ggplot(tibble(log10_wr_prob=log10(wr_draws)), aes(x=log10_wr_prob)) +
  geom_histogram(bins=50) +
  labs(title="log10 WR Probability Distribution", x="log10 P(WR)", y="Frequency") +
  theme_bw()

# Historical WR progression
wr <- read.csv("~/Downloads/history.csv") %>%
  mutate(Date=as.Date(Date,"%Y-%m-%d"),
         Time=as.numeric(Date - min(Date))+1) 
plot(wr$Time, wr$Seconds, type="l", lwd=2, xlab="Days since start", ylab="WR (sec)",
     main="WR Progression 2002-2025")
points(wr$Time, wr$Seconds, pch=19, col="red")
grid()

# WR rate of change
rate <- diff(wr$Seconds)/diff(wr$Time)
plot(rate, type="b", ylab="Rate of WR improvement (sec/day)", xlab="Record index")
abline(h=0,col="red")

# Load Niftski run data
niftski <- read.csv("~/Library/Mobile Documents/com~apple~CloudDocs/Combined Niftski Runs.csv")
for(i in 1:8) print(mean(niftski[,i]))

\end{verbatim}
    \item \textbf{Relevant visualizations:}

\begin{figure}[h]
  \centering
  \includegraphics[width=1\textwidth]{Final Project 1.png}
  \caption{World Record progression from 2002 to 2025.}
  \label{fig:boxplot}
\end{figure}

\begin{figure}[h]
  \centering
  \includegraphics[width=1\textwidth]{Final Project 2.png}
  \caption{World Record average improvement over time.}
  \label{fig:boxplot}
\end{figure}

\begin{table}[h!]
\centering
\begin{tabular}{|c|c|c|c|c|c|c|c|c|} \hline
Run/Stage & X1.1 & X1.2 & X4.1 & X4.2 & X8.1 & X8.2 & X8.3 & X8.4 \\ \hline 
1 & 1 & 1 & 0 & 0 & 0 & 0 & 0 & 0 \\ \hline
2 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\ \hline
3 & 0 & 1 & 0 & 0 & 0 & 0 & 0 & 0 \\ \hline
4 & 1 & 1 & 1 & 0 & 0 & 0 & 0 & 0 \\ \hline
5 & 1 & 0 & 0 & 0 & 0 & 0 & 0 & 0 \\ \hline
6 & 1 & 0 & 1 & 0 & 0 & 0 & 0 & 0 \\ \hline
\end{tabular}
\caption{Overview of Niftski's runs.}
\end{table}


\end{itemize}

\end{document}


